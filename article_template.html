<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{cn_title}} - NYTimes</title>
<style>
    :root {
        --bg-color: #fdfdfd;
        --text-color: #111;
        --base-font-size: 18px;
        --base-font-family: 'Georgia', 'Times New Roman', 'SongTi', serif;
        --line-height: 1.8;
    }
    body {
        font-family: var(--base-font-family);
        font-size: var(--base-font-size);
        line-height: var(--line-height);
        margin: 0;
        padding: 0;
        background: var(--bg-color);
        color: var(--text-color);
        transition: font-size 0.2s, font-family 0.2s;
    }

    /* 语言显示模式核心 CSS */
    /* 当 body 有 mode-en 类时，隐藏所有中文段落和标题 */
    body.mode-en .cn-headline,
    body.mode-en .cn-p { display: none; }

    /* 当 body 有 mode-cn 类时，隐藏所有英文段落和标题 */
    body.mode-cn .en-headline,
    body.mode-cn .en-p { display: none; }

    /* 顶部悬浮控制栏 */
    .controls-panel {
        position: sticky;
        top: 0;
        background: rgba(255,255,255,0.98);
        border-bottom: 1px solid #ddd;
        padding: 10px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 1000;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        font-size: 14px;
        flex-wrap: nowrap;
        gap: 10px;
        white-space: nowrap;
        overflow-x: auto;
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .controls-panel::-webkit-scrollbar { display: none; }

    .controls-right { display: flex; gap: 10px; align-items: center; margin-left: auto; }
    .control-group { display: flex; align-items: center; gap: 5px; }
    .control-group label { font-weight: 600; color: #555; font-size: 12px; display: none; }
    @media (min-width: 400px) { .control-group label { display: block; } }

    .btn-group { display: flex; border: 1px solid #ccc; border-radius: 4px; overflow: hidden; }
    .btn {
        background: #fff; border: none; border-right: 1px solid #ccc;
        padding: 5px 12px; cursor: pointer; font-size: 13px; color: #333;
        transition: all 0.2s;
    }
    .btn:last-child { border-right: none; }
    .btn:hover { background: #f5f5f5; }
    .btn.active { background: #333; color: white; }

    .content-container { max-width: 800px; margin: 0 auto; background: #fff; padding: 40px 20px; min-height: 100vh; }

    h1.cn-headline { font-weight: 700; margin-bottom: 15px; font-size: 1.8em; line-height: 1.3; color: #000; }
    h2.en-headline { font-weight: 400; font-style: italic; margin-top: 0; margin-bottom: 2em; font-size: 1.2em; color: #555; }

    .meta-line {
        font-family: sans-serif; font-size: 0.85rem; color: #666;
        margin-bottom: 2.5em; padding-bottom: 1em; border-bottom: 1px solid #eee; font-weight: 500;
    }

    .article-paragraph { margin-bottom: 2em; }
    p { margin: 0 0 1em 0; }
    .en-p { color: #222; margin-bottom: 0.6em; }
    .cn-p { color: #004276; font-weight: 500; }

    .back-link { text-decoration: none; color: #666; font-weight: 600; font-size: 14px; display: flex; align-items: center; flex-shrink: 0; }
    .back-link:hover { color: #000; }

    figure { margin: 2em 0; width: 100%; }
    img { max-width: 100%; height: auto; display: block; background: #f0f0f0; border-radius: 4px; }
    figcaption { font-size: 0.85em; color: #888; margin-top: 0.8em; text-align: center; }

    .footer-link { text-align: center; margin-top: 60px; padding-top: 20px; border-top: 1px solid #eee; font-family: sans-serif; }
    .footer-link a { color: #888; text-decoration: none; font-size: 0.9em; }
    .footer-link a:hover { color: #333; text-decoration: underline; }
</style>
<script>
    function setLanguage(lang, btn) {
        document.body.classList.remove('mode-dual', 'mode-en', 'mode-cn');
        document.body.classList.add('mode-' + lang);
        updateActive(btn);
        localStorage.setItem('nyt-pref-lang', lang);
    }

    function setFontSize(size, btn) {
        const root = document.documentElement;
        if(size === 'small') root.style.setProperty('--base-font-size', '18px');
        if(size === 'medium') root.style.setProperty('--base-font-size', '22px');
        updateActive(btn);
        localStorage.setItem('nyt-pref-size', size);
    }

    function setFontFamily(font, btn) {
        const root = document.documentElement;
        if(font === 'serif') root.style.setProperty('--base-font-family', "'Georgia', 'Times New Roman', 'SongTi', serif");
        if(font === 'reading') root.style.setProperty('--base-font-family', "'Segoe UI', 'Microsoft YaHei', sans-serif");
        updateActive(btn);
        localStorage.setItem('nyt-pref-font', font);
    }

    function updateActive(target) {
        const group = target.parentElement;
        group.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
        target.classList.add('active');
    }

    window.onload = function() {
        const savedSize = localStorage.getItem('nyt-pref-size') || 'small';
        const savedFont = localStorage.getItem('nyt-pref-font') || 'serif';
        const savedLang = localStorage.getItem('nyt-pref-lang') || 'dual';

        let targetSize = savedSize === 'large' ? 'medium' : savedSize;
        let targetFont = savedFont === 'sans' ? 'serif' : savedFont;

        const sizeBtn = document.querySelector(`.size-btn[data-size="${targetSize}"]`);
        if(sizeBtn) sizeBtn.click();

        const fontBtn = document.querySelector(`.font-btn[data-font="${targetFont}"]`);
        if(fontBtn) fontBtn.click();

        const langBtn = document.querySelector(`.lang-btn[data-lang="${savedLang}"]`);
        if(langBtn) langBtn.click();
    }
</script>
</head>
<body>
    <div class="controls-panel">
        <a href="../index.html" class="back-link">← Index</a>
        <div class="controls-right">
            <div class="control-group">
                <label>Lang</label>
                <div class="btn-group">
                    <button class="btn lang-btn" data-lang="dual" onclick="setLanguage('dual', this)">Dual</button>
                    <button class="btn lang-btn" data-lang="en" onclick="setLanguage('en', this)">EN</button>
                    <button class="btn lang-btn" data-lang="cn" onclick="setLanguage('cn', this)">CN</button>
                </div>
            </div>
            <div class="control-group">
                <label>Size</label>
                <div class="btn-group">
                    <button class="btn size-btn" data-size="small" onclick="setFontSize('small', this)">A</button>
                    <button class="btn size-btn" data-size="medium" onclick="setFontSize('medium', this)">A+</button>
                </div>
            </div>
            <div class="control-group">
                <label>Font</label>
                <div class="btn-group">
                    <button class="btn font-btn" data-font="serif" onclick="setFontFamily('serif', this)">Serif</button>
                    <button class="btn font-btn" data-font="reading" onclick="setFontFamily('reading', this)">Modern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="content-container">
        <h1 class="cn-headline">{{cn_title}}</h1>
        <h2 class="en-headline">{{en_title}}</h2>
        <div class="meta-line">{{author}} <span style="margin: 0 8px;">•</span> {{date}}</div>

        <div class="article-body">
            {{content}}
        </div>

        <div class="footer-link">
            <a href="{{url}}" target="_blank">View Original Article on NYTimes.com ↗</a>
        </div>
    </div>
</body>
</html>